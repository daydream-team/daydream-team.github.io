"use strict";var App={};App={GLOBAL:{activeToasts:0,isTouch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},progress:$("#progress")},CONFIG:"undefined"===CONFIG?console.error("Missing config file"):CONFIG,modal:function(){$(".modal-trigger").leanModal()},collapsible:function(){$(".collapsible").collapsible()},scrollspy:function(){$(".scrollspy").scrollSpy()},sideNav:function(){$(".button-collapse").sideNav({closeOnClick:!0})},owl:function(){$(".owl-carousel").owlCarousel({items:1,dots:!0})},map:function(){function e(e){var a={zoom:App.CONFIG.googleMaps.zoom,center:new google.maps.LatLng(App.CONFIG.googleMaps.lat,App.CONFIG.googleMaps.lng),scrollwheel:!1,draggable:!App.GLOBAL.isTouch()};"undefined"!==e&&(a.styles=e);var s=document.getElementById("map"),o=new google.maps.Map(s,a);if(App.CONFIG.googleMaps.marker){new google.maps.Marker({position:new google.maps.LatLng(App.CONFIG.googleMaps.lat,App.CONFIG.googleMaps.lng),map:o,title:App.CONFIG.googleMaps.markerTitle})}}$("#map").length>0&&$.ajax({url:"./assets/config/"+App.CONFIG.googleMaps.stylesConfigFile,type:"GET"}).done(function(a){e(a)}).error(function(a){console.error("Map style configuration is missing:",a.statusText),console.warn("Loading map with default style"),e()})},contactForm:function(e){var a=$("#name-"+e),s=$("#contact-"+e),o=$("#message-"+e),t=$("#send-message-"+e),n=o.html();t.on("click",function(e){console.log("click"),e.preventDefault(),App._sendMessage(a,s,o,n,t)})},_sendMessage:function(e,a,s,o,t){var n=App._verifyField(e,App.CONFIG.toastMessages.nameMissing),p=App._verifyField(a,App.CONFIG.toastMessages.contactMissing),l=App._verifyField(s,App.CONFIG.toastMessages.messageMissing,o);n&&p&&l&&(App.GLOBAL.progress.show(),t.attr("disabled",!0),$.ajax({url:"/mailer/mailer.php",type:"POST",data:{name:e.html()||e.val(),contact:a.html()||a.val(),message:s.html()||s.val()}}).done(function(t){1==t?(Materialize.toast(App.CONFIG.toastMessages.messageSent,App.CONFIG.toastSpeed,"success"),e.html("")&&e.val(""),a.html("")&&a.val(""),s.html(o)&&s.val(o),e.next().removeClass("active"),a.next().removeClass("active"),s.next().removeClass("active")):Materialize.toast(App.CONFIG.toastMessages.somethingWrong+t,App.CONFIG.toastSpeed,"error")}).error(function(e){Materialize.toast(App.CONFIG.toastMessages.somethingWrong+e,App.CONFIG.toastSpeed,"error")}).complete(function(){App.GLOBAL.progress.hide(),t.attr("disabled",!1)}))},_verifyField:function(e,a,s){var o,t=e.html()||e.val(),n=0===t.length;return o="undefined"!==s?n||t===s:n,"email"!==e.attr("type")||/.+\@.+\..+/.test(t)?!o||(Materialize.toast(a,App.CONFIG.toastSpeed,"error",function(){App.GLOBAL.activeToasts--}),App.GLOBAL.activeToasts++,!1):(Materialize.toast(App.CONFIG.toastMessages.enterValidEmail,App.CONFIG.toastSpeed,"error",function(){App.GLOBAL.activeToasts--}),App.GLOBAL.activeToasts++,!1)},ajaxChimp:function(){var e=$("#mc-embedded-subscribe-form");e.ajaxChimp({url:$(this).attr("action"),callback:function(a){var s=a.msg,o=a.result,t="success"===o?1e4:5e3;Materialize.toast(s.replace(/\d - /,""),t,o),"success"===o&&(e.find("input[type=email]").val(""),e.find("label").removeClass("active"))}})},loaded:function(){var e=$("body"),a=$(".spinner-container");e.addClass("locked"),$(window).on("load",function(){e.removeClass("locked"),a.addClass("hide-spinner"),setTimeout(function(){a.hide()},400)})}},$(document).ready(function(){App.modal(),App.collapsible(),App.scrollspy(),App.sideNav(),App.owl(),App.map(),$("#human-form").length?App.contactForm("human"):$("#classic-form").length&&App.contactForm("classic"),App.ajaxChimp(),App.loaded()});